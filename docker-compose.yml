version: '2'

networks:
  odoonet:
    driver: bridge

services:
  postgresql:
    image: dimaskiddo/debian-buster:postgresql-11
    networks:
      - odoonet
    env_file: ./env/postgresql.env
    volumes:
      - ./data/postgresql:/var/lib/pgsql/data
    restart: unless-stopped

  odoo:
    image: 'dimaskiddo/debian-buster:odoo-15.0'
    networks:
      - odoonet
    ports:
      - 80:8069
    env_file: ./env/odoo.env
    volumes:
      - ./data/odoo/data:/var/lib/odoo
      - ./data/odoo/addons:/mnt/extra-addons
    depends_on:
      - postgresql
    restart: unless-stopped
